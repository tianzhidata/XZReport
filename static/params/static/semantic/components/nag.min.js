!function(e,o,t){"use strict";o=void 0!==o&&o.Math==Math?o:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(n){var i,s=e(this),a=s.selector||"",r=(new Date).getTime(),l=[],c=n,g="string"==typeof c,d=[].slice.call(arguments,1);return s.each((function(){var s=e.isPlainObject(n)?e.extend(!0,{},e.fn.nag.settings,n):e.extend({},e.fn.nag.settings),u=(s.className,s.selector),m=s.error,f=s.namespace,p="."+f,h=f+"-module",b=e(this),v=(b.find(u.close),s.context?e(s.context):e("body")),y=this,k=b.data(h),S=(o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,{initialize:function(){S.verbose("Initializing element"),b.on("click"+p,u.close,S.dismiss).data(h,S),s.detachable&&b.parent()[0]!==v[0]&&b.detach().prependTo(v),0<s.displayTime&&setTimeout(S.hide,s.displayTime),S.show()},destroy:function(){S.verbose("Destroying instance"),b.removeData(h).off(p)},show:function(){S.should.show()&&!b.is(":visible")&&(S.debug("Showing nag",s.animation.show),"fade"==s.animation.show?b.fadeIn(s.duration,s.easing):b.slideDown(s.duration,s.easing))},hide:function(){S.debug("Showing nag",s.animation.hide),"fade"==s.animation.show?b.fadeIn(s.duration,s.easing):b.slideUp(s.duration,s.easing)},onHide:function(){S.debug("Removing nag",s.animation.hide),b.remove(),s.onHide&&s.onHide()},dismiss:function(e){s.storageMethod&&S.storage.set(s.key,s.value),S.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return s.persist?(S.debug("Persistent nag is set, can show nag"),!0):S.storage.get(s.key)!=s.value.toString()?(S.debug("Stored value is not set, can show nag",S.storage.get(s.key)),!0):(S.debug("Stored value is set, cannot show nag",S.storage.get(s.key)),!1)}},get:{storageOptions:function(){var e={};return s.expires&&(e.expires=s.expires),s.domain&&(e.domain=s.domain),s.path&&(e.path=s.path),e}},clear:function(){S.storage.remove(s.key)},storage:{set:function(n,i){var a=S.get.storageOptions();if("localstorage"==s.storageMethod&&o.localStorage!==t)o.localStorage.setItem(n,i),S.debug("Value stored using local storage",n,i);else if("sessionstorage"==s.storageMethod&&o.sessionStorage!==t)o.sessionStorage.setItem(n,i),S.debug("Value stored using session storage",n,i);else{if(e.cookie===t)return void S.error(m.noCookieStorage);e.cookie(n,i,a),S.debug("Value stored using cookie",n,i,a)}},get:function(n,i){var a;return"localstorage"==s.storageMethod&&o.localStorage!==t?a=o.localStorage.getItem(n):"sessionstorage"==s.storageMethod&&o.sessionStorage!==t?a=o.sessionStorage.getItem(n):e.cookie!==t?a=e.cookie(n):S.error(m.noCookieStorage),"undefined"!=a&&"null"!=a&&a!==t&&null!==a||(a=t),a},remove:function(n){var i=S.get.storageOptions();"localstorage"==s.storageMethod&&o.localStorage!==t?o.localStorage.removeItem(n):"sessionstorage"==s.storageMethod&&o.sessionStorage!==t?o.sessionStorage.removeItem(n):e.cookie!==t?e.removeCookie(n,i):S.error(m.noStorage)}},setting:function(o,n){if(S.debug("Changing setting",o,n),e.isPlainObject(o))e.extend(!0,s,o);else{if(n===t)return s[o];e.isPlainObject(s[o])?e.extend(!0,s[o],n):s[o]=n}},internal:function(o,n){if(e.isPlainObject(o))e.extend(!0,S,o);else{if(n===t)return S[o];S[o]=n}},debug:function(){!s.silent&&s.debug&&(s.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,s.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!s.silent&&s.verbose&&s.debug&&(s.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,s.name+":"),S.verbose.apply(console,arguments)))},error:function(){s.silent||(S.error=Function.prototype.bind.call(console.error,console,s.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var o,t;s.performance&&(t=(o=(new Date).getTime())-(r||o),r=o,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":t})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var o=s.name+":",n=0;r=!1,clearTimeout(S.performance.timer),e.each(l,(function(e,o){n+=o["Execution Time"]})),o+=" "+n+"ms",a&&(o+=" '"+a+"'"),(console.group!==t||console.table!==t)&&0<l.length&&(console.groupCollapsed(o),console.table?console.table(l):e.each(l,(function(e,o){o.Name,o["Execution Time"]})),console.groupEnd()),l=[]}},invoke:function(o,n,s){var a,r,l,c=k;return n=n||d,s=y||s,"string"==typeof o&&c!==t&&(o=o.split(/[\. ]/),a=o.length-1,e.each(o,(function(n,i){var s=n!=a?i+o[n+1].charAt(0).toUpperCase()+o[n+1].slice(1):o;if(e.isPlainObject(c[s])&&n!=a)c=c[s];else{if(c[s]!==t)return r=c[s],!1;if(!e.isPlainObject(c[i])||n==a)return c[i]!==t?r=c[i]:S.error(m.method,o),!1;c=c[i]}}))),e.isFunction(r)?l=r.apply(s,n):r!==t&&(l=r),e.isArray(i)?i.push(l):i!==t?i=[i,l]:l!==t&&(i=l),r}});g?(k===t&&S.initialize(),S.invoke(c)):(k!==t&&k.invoke("destroy"),S.initialize())})),i!==t?i:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,o,t,n,i){return-n*(o/=i)*(o-2)+t}})}(jQuery,window,void document);
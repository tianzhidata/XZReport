!function(e,n,o){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(t){var r,a=e(this),i=a.selector||"",c=(new Date).getTime(),l=[],d=t,u="string"==typeof d,s=[].slice.call(arguments,1);return a.each((function(){var m=e.isPlainObject(t)?e.extend(!0,{},e.fn.embed.settings,t):e.extend({},e.fn.embed.settings),p=m.selector,f=m.className,h=m.sources,b=m.error,g=m.metadata,v=m.namespace,y=m.templates,w="."+v,P="module-"+v,C=(e(n),e(this)),D=(C.find(p.placeholder),C.find(p.icon),C.find(p.embed)),E=this,U=C.data(P),j={initialize:function(){j.debug("Initializing embed"),j.determine.autoplay(),j.create(),j.bind.events(),j.instantiate()},instantiate:function(){j.verbose("Storing instance of module",j),U=j,C.data(P,j)},destroy:function(){j.verbose("Destroying previous instance of embed"),j.reset(),C.removeData(P).off(w)},refresh:function(){j.verbose("Refreshing selector cache"),C.find(p.placeholder),C.find(p.icon),D=C.find(p.embed)},bind:{events:function(){j.has.placeholder()&&(j.debug("Adding placeholder events"),C.on("click"+w,p.placeholder,j.createAndShow).on("click"+w,p.icon,j.createAndShow))}},create:function(){j.get.placeholder()?j.createPlaceholder():j.createAndShow()},createPlaceholder:function(e){var n=j.get.icon(),o=j.get.url();j.generate.embed(o),e=e||j.get.placeholder(),C.html(y.placeholder(e,n)),j.debug("Creating placeholder for embed",e,n)},createEmbed:function(n){j.refresh(),n=n||j.get.url(),D=e("<div/>").addClass(f.embed).html(j.generate.embed(n)).appendTo(C),m.onCreate.call(E,n),j.debug("Creating embed object",D)},changeEmbed:function(e){D.html(j.generate.embed(e))},createAndShow:function(){j.createEmbed(),j.show()},change:function(e,n,o){j.debug("Changing video to ",e,n,o),C.data(g.source,e).data(g.id,n),o?C.data(g.url,o):C.removeData(g.url),j.has.embed()?j.changeEmbed():j.create()},reset:function(){j.debug("Clearing embed and showing placeholder"),j.remove.data(),j.remove.active(),j.remove.embed(),j.showPlaceholder(),m.onReset.call(E)},show:function(){j.debug("Showing embed"),j.set.active(),m.onDisplay.call(E)},hide:function(){j.debug("Hiding embed"),j.showPlaceholder()},showPlaceholder:function(){j.debug("Showing placeholder image"),j.remove.active(),m.onPlaceholderDisplay.call(E)},get:{id:function(){return m.id||C.data(g.id)},placeholder:function(){return m.placeholder||C.data(g.placeholder)},icon:function(){return m.icon?m.icon:C.data(g.icon)!==o?C.data(g.icon):j.determine.icon()},source:function(e){return m.source?m.source:C.data(g.source)!==o?C.data(g.source):j.determine.source()},type:function(){var e=j.get.source();return h[e]!==o&&h[e].type},url:function(){return m.url?m.url:C.data(g.url)!==o?C.data(g.url):j.determine.url()}},determine:{autoplay:function(){j.should.autoplay()&&(m.autoplay=!0)},source:function(n){var o=!1;return(n=n||j.get.url())&&e.each(h,(function(e,t){if(-1!==n.search(t.domain))return o=e,!1})),o},icon:function(){var e=j.get.source();return h[e]!==o&&h[e].icon},url:function(){var e=m.id||C.data(g.id),n=m.source||C.data(g.source),t=h[n]!==o&&h[n].url.replace("{id}",e);return t&&C.data(g.url,t),t}},set:{active:function(){C.addClass(f.active)}},remove:{data:function(){C.removeData(g.id).removeData(g.icon).removeData(g.placeholder).removeData(g.source).removeData(g.url)},active:function(){C.removeClass(f.active)},embed:function(){D.empty()}},encode:{parameters:function(e){var n,o=[];for(n in e)o.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return o.join("&amp;")}},generate:{embed:function(e){j.debug("Generating embed html");var n,o,t=j.get.source();return(e=j.get.url(e))?(o=j.generate.parameters(t),n=y.iframe(e,o)):j.error(b.noURL,C),n},parameters:function(n,t){var r=h[n]&&h[n].parameters!==o?h[n].parameters(m):{};return(t=t||m.parameters)&&(r=e.extend({},r,t)),r=m.onEmbed(r),j.encode.parameters(r)}},has:{embed:function(){return 0<D.length},placeholder:function(){return m.placeholder||C.data(g.placeholder)}},should:{autoplay:function(){return"auto"===m.autoplay?m.placeholder||C.data(g.placeholder)!==o:m.autoplay}},is:{video:function(){return"video"==j.get.type()}},setting:function(n,t){if(j.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,m,n);else{if(t===o)return m[n];e.isPlainObject(m[n])?e.extend(!0,m[n],t):m[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,j,n);else{if(t===o)return j[n];j[n]=t}},debug:function(){!m.silent&&m.debug&&(m.performance?j.performance.log(arguments):(j.debug=Function.prototype.bind.call(console.info,console,m.name+":"),j.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?j.performance.log(arguments):(j.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),j.verbose.apply(console,arguments)))},error:function(){m.silent||(j.error=Function.prototype.bind.call(console.error,console,m.name+":"),j.error.apply(console,arguments))},performance:{log:function(e){var n,o;m.performance&&(o=(n=(new Date).getTime())-(c||n),c=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":o})),clearTimeout(j.performance.timer),j.performance.timer=setTimeout(j.performance.display,500)},display:function(){var n=m.name+":",t=0;c=!1,clearTimeout(j.performance.timer),e.each(l,(function(e,n){t+=n["Execution Time"]})),n+=" "+t+"ms",i&&(n+=" '"+i+"'"),1<a.length&&(n+=" ("+a.length+")"),(console.group!==o||console.table!==o)&&0<l.length&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,(function(e,n){n.Name,n["Execution Time"]})),console.groupEnd()),l=[]}},invoke:function(n,t,a){var i,c,l,d=U;return t=t||s,a=E||a,"string"==typeof n&&d!==o&&(n=n.split(/[\. ]/),i=n.length-1,e.each(n,(function(t,r){var a=t!=i?r+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(d[a])&&t!=i)d=d[a];else{if(d[a]!==o)return c=d[a],!1;if(!e.isPlainObject(d[r])||t==i)return d[r]!==o?c=d[r]:j.error(b.method,n),!1;d=d[r]}}))),e.isFunction(c)?l=c.apply(a,t):c!==o&&(l=c),e.isArray(r)?r.push(l):r!==o?r=[r,l]:l!==o&&(r=l),c}};u?(U===o&&j.initialize(),j.invoke(d)):(U!==o&&U.invoke("destroy"),j.initialize())})),r!==o?r:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||o,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||o,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,n){var o=e;return n&&(o+="?"+n),'<iframe src="'+o+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,n){var o="";return n&&(o+='<i class="'+n+' icon"></i>'),e&&(o+='<img class="placeholder" src="'+e+'">'),o}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,void document);
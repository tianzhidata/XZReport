!function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(a){var o,r=e(this),s=(e("body"),(new Date).getTime()),d=[],l=a,u="string"==typeof l,c=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each((function(){var t,f,m=r.selector||"",h=e.isPlainObject(a)?e.extend(!0,{},e.fn.shape.settings,a):e.extend({},e.fn.shape.settings),p=h.namespace,v=h.selector,b=h.error,x=h.className,y="."+p,S="module-"+p,w=e(this),C=w.find(v.sides),W=w.find(v.side),F=!1,H=this,T=w.data(S),Z={initialize:function(){Z.verbose("Initializing module for",H),Z.set.defaultSide(),Z.instantiate()},instantiate:function(){Z.verbose("Storing instance of module",Z),T=Z,w.data(S,T)},destroy:function(){Z.verbose("Destroying previous module for",H),w.removeData(S).off(y)},refresh:function(){Z.verbose("Refreshing selector cache for",H),w=e(H),C=e(this).find(v.shape),W=e(this).find(v.side)},repaint:function(){Z.verbose("Forcing repaint event"),(C[0]||i.createElement("div")).offsetWidth},animate:function(e,i){Z.verbose("Animating box with properties",e),i=i||function(e){Z.verbose("Executing animation callback"),e!==n&&e.stopPropagation(),Z.reset(),Z.set.active()},h.beforeChange.call(f[0]),Z.get.transitionEvent()?(Z.verbose("Starting CSS animation"),w.addClass(x.animating),C.css(e).one(Z.get.transitionEvent(),i),Z.set.duration(h.duration),g((function(){w.addClass(x.animating),t.addClass(x.hidden)}))):i()},queue:function(e){Z.debug("Queueing animation of",e),C.one(Z.get.transitionEvent(),(function(){Z.debug("Executing queued animation"),setTimeout((function(){w.shape(e)}),0)}))},reset:function(){Z.verbose("Animating states reset"),w.removeClass(x.animating).attr("style","").removeAttr("style"),C.attr("style","").removeAttr("style"),W.attr("style","").removeAttr("style").removeClass(x.hidden),f.removeClass(x.animating).attr("style","").removeAttr("style")},is:{complete:function(){return W.filter("."+x.active)[0]==f[0]},animating:function(){return w.hasClass(x.animating)}},set:{defaultSide:function(){t=w.find("."+h.className.active),f=0<t.next(v.side).length?t.next(v.side):w.find(v.side).first(),F=!1,Z.verbose("Active side set to",t),Z.verbose("Next side set to",f)},duration:function(e){e="number"==typeof(e=e||h.duration)?e+"ms":e,Z.verbose("Setting animation duration",e),!h.duration&&0!==h.duration||C.add(W).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=w.find("."+h.className.active),t=e.outerWidth(!0),i=e.outerHeight(!0);w.css({width:t,height:i})},stageSize:function(){var e=w.clone().addClass(x.loading),t=e.find("."+h.className.active),i=F?e.find(v.side).eq(F):0<t.next(v.side).length?t.next(v.side):e.find(v.side).first(),n="next"==h.width?i.outerWidth(!0):"initial"==h.width?w.width():h.width,a="next"==h.height?i.outerHeight(!0):"initial"==h.height?w.height():h.height;t.removeClass(x.active),i.addClass(x.active),e.insertAfter(w),e.remove(),"auto"!=h.width&&(w.css("width",n+h.jitter),Z.verbose("Specifying width during animation",n)),"auto"!=h.height&&(w.css("height",a+h.jitter),Z.verbose("Specifying height during animation",a))},nextSide:function(e){F=e,f=W.filter(e),F=W.index(f),0===f.length&&(Z.set.defaultSide(),Z.error(b.side)),Z.verbose("Next side manually set to",f)},active:function(){Z.verbose("Setting new side to active",f),W.removeClass(x.active),f.addClass(x.active),h.onChange.call(f[0]),Z.set.defaultSide()}},flip:{up:function(){var e;!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip up"):(Z.debug("Flipping up",f),e=Z.get.transform.up(),Z.set.stageSize(),Z.stage.above(),Z.animate(e)):Z.debug("Side already visible",f)},down:function(){var e;!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip down"):(Z.debug("Flipping down",f),e=Z.get.transform.down(),Z.set.stageSize(),Z.stage.below(),Z.animate(e)):Z.debug("Side already visible",f)},left:function(){var e;!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip left"):(Z.debug("Flipping left",f),e=Z.get.transform.left(),Z.set.stageSize(),Z.stage.left(),Z.animate(e)):Z.debug("Side already visible",f)},right:function(){var e;!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip right"):(Z.debug("Flipping right",f),e=Z.get.transform.right(),Z.set.stageSize(),Z.stage.right(),Z.animate(e)):Z.debug("Side already visible",f)},over:function(){!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip over"):(Z.debug("Flipping over",f),Z.set.stageSize(),Z.stage.behind(),Z.animate(Z.get.transform.over())):Z.debug("Side already visible",f)},back:function(){!Z.is.complete()||Z.is.animating()||h.allowRepeats?Z.is.animating()?Z.queue("flip back"):(Z.debug("Flipping back",f),Z.set.stageSize(),Z.stage.behind(),Z.animate(Z.get.transform.back())):Z.debug("Side already visible",f)}},get:{transform:{up:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(-90deg)"}},down:function(){return{transform:"translateY("+-(t.outerHeight(!0)-f.outerHeight(!0))/2+"px) translateZ("+-t.outerHeight(!0)/2+"px) rotateX(90deg)"}},left:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(90deg)"}},right:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) translateZ("+-t.outerWidth(!0)/2+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-(t.outerWidth(!0)-f.outerWidth(!0))/2+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=i.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(t.style[e]!==n)return a[e]},nextSide:function(){return 0<t.next(v.side).length?t.next(v.side):w.find(v.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};Z.verbose("Setting the initial animation position as above",f,e),C.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(x.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};Z.verbose("Setting the initial animation position as below",f,e),C.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(x.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};Z.verbose("Setting the initial animation position as left",f,n),C.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(-90deg) translateZ("+n.depth.next+"px)"})},right:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};Z.verbose("Setting the initial animation position as left",f,n),C.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(90deg) translateZ("+n.depth.next+"px)"})},behind:function(){var e=t.outerWidth(!0),i=f.outerWidth(!0),n={origin:(e-i)/2,depth:{active:i/2,next:e/2}};Z.verbose("Setting the initial animation position as behind",f,n),t.css({transform:"rotateY(0deg)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,i){if(Z.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];e.isPlainObject(h[t])?e.extend(!0,h[t],i):h[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,Z,t);else{if(i===n)return Z[t];Z[t]=i}},debug:function(){!h.silent&&h.debug&&(h.performance?Z.performance.log(arguments):(Z.debug=Function.prototype.bind.call(console.info,console,h.name+":"),Z.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?Z.performance.log(arguments):(Z.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),Z.verbose.apply(console,arguments)))},error:function(){h.silent||(Z.error=Function.prototype.bind.call(console.error,console,h.name+":"),Z.error.apply(console,arguments))},performance:{log:function(e){var t,i;h.performance&&(i=(t=(new Date).getTime())-(s||t),s=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:H,"Execution Time":i})),clearTimeout(Z.performance.timer),Z.performance.timer=setTimeout(Z.performance.display,500)},display:function(){var t=h.name+":",i=0;s=!1,clearTimeout(Z.performance.timer),e.each(d,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",m&&(t+=" '"+m+"'"),1<r.length&&(t+=" ("+r.length+")"),(console.group!==n||console.table!==n)&&0<d.length&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,(function(e,t){t.Name,t["Execution Time"]})),console.groupEnd()),d=[]}},invoke:function(t,i,a){var r,s,d,l=T;return i=i||c,a=H||a,"string"==typeof t&&l!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,(function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[o])&&i!=r)l=l[o];else{if(l[o]!==n)return s=l[o],!1;if(!e.isPlainObject(l[a])||i==r)return l[a]!==n&&(s=l[a]),!1;l=l[a]}}))),e.isFunction(s)?d=s.apply(a,i):s!==n&&(d=s),e.isArray(o)?o.push(d):o!==n?o=[o,d]:d!==n&&(o=d),s}};u?(T===n&&Z.initialize(),Z.invoke(l)):(T!==n&&T.invoke("destroy"),Z.initialize())})),o!==n?o:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document);
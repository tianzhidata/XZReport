!function(e,n,t){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(n){var i,a=e(this),o=a.selector||"",r=(new Date).getTime(),s=[],l=n,c="string"==typeof l,u=[].slice.call(arguments,1);return a.each((function(){var d,g=e.isPlainObject(n)?e.extend(!0,{},e.fn.rating.settings,n):e.extend({},e.fn.rating.settings),m=g.namespace,f=g.className,v=g.metadata,p=g.selector,b=(g.error,"."+m),h="module-"+m,y=this,x=e(this).data(h),R=e(this),C=R.find(p.icon),T={initialize:function(){T.verbose("Initializing rating module",g),0===C.length&&T.setup.layout(),g.interactive?T.enable():T.disable(),T.set.initialLoad(),T.set.rating(T.get.initialRating()),T.remove.initialLoad(),T.instantiate()},instantiate:function(){T.verbose("Instantiating module",g),x=T,R.data(h,T)},destroy:function(){T.verbose("Destroying previous instance",x),T.remove.events(),R.removeData(h)},refresh:function(){C=R.find(p.icon)},setup:{layout:function(){var n=T.get.maxRating(),t=e.fn.rating.settings.templates.icon(n);T.debug("Generating icon html dynamically"),R.html(t),T.refresh()}},event:{mouseenter:function(){var n=e(this);n.nextAll().removeClass(f.selected),R.addClass(f.selected),n.addClass(f.selected).prevAll().addClass(f.selected)},mouseleave:function(){R.removeClass(f.selected),C.removeClass(f.selected)},click:function(){var n=e(this),t=T.get.rating(),i=C.index(n)+1;("auto"==g.clearable?1===C.length:g.clearable)&&t==i?T.clearRating():T.set.rating(i)}},clearRating:function(){T.debug("Clearing current rating"),T.set.rating(0)},bind:{events:function(){T.verbose("Binding events"),R.on("mouseenter"+b,p.icon,T.event.mouseenter).on("mouseleave"+b,p.icon,T.event.mouseleave).on("click"+b,p.icon,T.event.click)}},remove:{events:function(){T.verbose("Removing events"),R.off(b)},initialLoad:function(){d=!1}},enable:function(){T.debug("Setting rating to interactive mode"),T.bind.events(),R.removeClass(f.disabled)},disable:function(){T.debug("Setting rating to read-only mode"),T.remove.events(),R.addClass(f.disabled)},is:{initialLoad:function(){return d}},get:{initialRating:function(){return R.data(v.rating)!==t?(R.removeData(v.rating),R.data(v.rating)):g.initialRating},maxRating:function(){return R.data(v.maxRating)!==t?(R.removeData(v.maxRating),R.data(v.maxRating)):g.maxRating},rating:function(){var e=C.filter("."+f.active).length;return T.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var n=0<=e-1?e-1:0,t=C.eq(n);R.removeClass(f.selected),C.removeClass(f.selected).removeClass(f.active),0<e&&(T.verbose("Setting current rating to",e),t.prevAll().addBack().addClass(f.active)),T.is.initialLoad()||g.onRate.call(y,e)},initialLoad:function(){d=!0}},setting:function(n,i){if(T.debug("Changing setting",n,i),e.isPlainObject(n))e.extend(!0,g,n);else{if(i===t)return g[n];e.isPlainObject(g[n])?e.extend(!0,g[n],i):g[n]=i}},internal:function(n,i){if(e.isPlainObject(n))e.extend(!0,T,n);else{if(i===t)return T[n];T[n]=i}},debug:function(){!g.silent&&g.debug&&(g.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,g.name+":"),T.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),T.verbose.apply(console,arguments)))},error:function(){g.silent||(T.error=Function.prototype.bind.call(console.error,console,g.name+":"),T.error.apply(console,arguments))},performance:{log:function(e){var n,t;g.performance&&(t=(n=(new Date).getTime())-(r||n),r=n,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":t})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(T.performance.display,500)},display:function(){var n=g.name+":",i=0;r=!1,clearTimeout(T.performance.timer),e.each(s,(function(e,n){i+=n["Execution Time"]})),n+=" "+i+"ms",o&&(n+=" '"+o+"'"),1<a.length&&(n+=" ("+a.length+")"),(console.group!==t||console.table!==t)&&0<s.length&&(console.groupCollapsed(n),console.table?console.table(s):e.each(s,(function(e,n){n.Name,n["Execution Time"]})),console.groupEnd()),s=[]}},invoke:function(n,a,o){var r,s,l,c=x;return a=a||u,o=y||o,"string"==typeof n&&c!==t&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,(function(i,a){var o=i!=r?a+n[i+1].charAt(0).toUpperCase()+n[i+1].slice(1):n;if(e.isPlainObject(c[o])&&i!=r)c=c[o];else{if(c[o]!==t)return s=c[o],!1;if(!e.isPlainObject(c[a])||i==r)return c[a]!==t&&(s=c[a]),!1;c=c[a]}}))),e.isFunction(s)?l=s.apply(o,a):s!==t&&(l=s),e.isArray(i)?i.push(l):i!==t?i=[i,l]:l!==t&&(i=l),s}};c?(x===t&&T.initialize(),T.invoke(l)):(x!==t&&x.invoke("destroy"),T.initialize())})),i!==t?i:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var n=1,t="";n<=e;)t+='<i class="icon"></i>',n++;return t}}}}(jQuery,window,void document);
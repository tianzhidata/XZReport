!function(e,t,o,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(i){var s,r=e(this),c=r.selector||"",l=(new Date).getTime(),a=[],f=i,m="string"==typeof f,u=[].slice.call(arguments,1);return r.each((function(){var r,h,d,g,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.sticky.settings,i):e.extend({},e.fn.sticky.settings),b=p.className,v=p.namespace,x=p.error,S="."+v,C="module-"+v,y=e(this),k=e(t),z=e(p.scrollContext),T=(y.selector,y.data(C)),w=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},B=this,P={initialize:function(){P.determineContainer(),P.determineContext(),P.verbose("Initializing sticky",p,r),P.save.positions(),P.checkErrors(),P.bind.events(),p.observeChanges&&P.observeChanges(),P.instantiate()},instantiate:function(){P.verbose("Storing instance of module",P),T=P,y.data(C,P)},destroy:function(){P.verbose("Destroying previous instance"),P.reset(),d&&d.disconnect(),g&&g.disconnect(),k.off("load"+S,P.event.load).off("resize"+S,P.event.resize),z.off("scrollchange"+S,P.event.scrollchange),y.removeData(C)},observeChanges:function(){"MutationObserver"in t&&(d=new MutationObserver(P.event.documentChanged),g=new MutationObserver(P.event.changed),d.observe(o,{childList:!0,subtree:!0}),g.observe(B,{childList:!0,subtree:!0}),g.observe(h[0],{childList:!0,subtree:!0}),P.debug("Setting up mutation observer",g))},determineContainer:function(){r=p.container?e(p.container):y.offsetParent()},determineContext:function(){0!==(h=p.context?e(p.context):r).length||P.error(x.invalidContext,p.context,y)},checkErrors:function(){if(P.is.hidden()&&P.error(x.visible,y),P.cache.element.height>P.cache.context.height)return P.reset(),void P.error(x.elementSize,y)},bind:{events:function(){k.on("load"+S,P.event.load).on("resize"+S,P.event.resize),z.off("scroll"+S).on("scroll"+S,P.event.scroll).on("scrollchange"+S,P.event.scrollchange)}},event:{changed:function(e){clearTimeout(P.timer),P.timer=setTimeout((function(){P.verbose("DOM tree modified, updating sticky menu",e),P.refresh()}),100)},documentChanged:function(t){[].forEach.call(t,(function(t){t.removedNodes&&[].forEach.call(t.removedNodes,(function(t){(t==B||0<e(t).find(B).length)&&(P.debug("Element removed from DOM, tearing down events"),P.destroy())}))}))},load:function(){P.verbose("Page contents finished loading"),w(P.refresh)},resize:function(){P.verbose("Window resized"),w(P.refresh)},scroll:function(){w((function(){z.triggerHandler("scrollchange"+S,z.scrollTop())}))},scrollchange:function(e,t){P.stick(t),p.onScroll.call(B)}},refresh:function(e){P.reset(),p.context||P.determineContext(),e&&P.determineContainer(),P.save.positions(),P.stick(),p.onReposition.call(B)},supports:{sticky:function(){var t=e("<div/>");return t[0],t.addClass(b.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){P.lastScroll=e},elementScroll:function(e){P.elementScroll=e},positions:function(){var e={height:z.height()},t={margin:{top:parseInt(y.css("margin-top"),10),bottom:parseInt(y.css("margin-bottom"),10)},offset:y.offset(),width:y.outerWidth(),height:y.outerHeight()},o={offset:h.offset(),height:h.outerHeight()};r.outerHeight(),P.is.standardScroll()||(P.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=z.scrollTop(),e.left=z.scrollLeft(),t.offset.top+=e.top,o.offset.top+=e.top,t.offset.left+=e.left,o.offset.left+=e.left),P.cache={fits:t.height+p.offset<=e.height,sameHeight:t.height==o.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:o.offset.top,height:o.height,bottom:o.offset.top+o.height}},P.set.containerSize(),P.stick(),P.debug("Caching element positions",P.cache)}},get:{direction:function(e){var t="down";return e=e||z.scrollTop(),P.lastScroll!==n&&(P.lastScroll<e?t="down":P.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||z.scrollTop(),P.lastScroll?e-P.lastScroll:0},currentElementScroll:function(){return P.elementScroll?P.elementScroll:P.is.top()?Math.abs(parseInt(y.css("top"),10))||0:Math.abs(parseInt(y.css("bottom"),10))||0},elementScroll:function(e){e=e||z.scrollTop();var t=P.cache.element,o=P.cache.scrollContext,n=P.get.scrollChange(e),i=t.height-o.height+p.offset,s=P.get.currentElementScroll(),r=s+n;return P.cache.fits||r<0?0:i<r?i:r}},remove:{lastScroll:function(){delete P.lastScroll},elementScroll:function(e){delete P.elementScroll},minimumSize:function(){r.css("min-height","")},offset:function(){y.css("margin-top","")}},set:{offset:function(){P.verbose("Setting offset on element",p.offset),y.css("margin-top",p.offset)},containerSize:function(){var e,t=r.get(0).tagName;"HTML"===t||"body"==t?P.determineContainer():((e=Math.max(P.cache.context.height,P.cache.element.height))-r.outerHeight()>p.jitter?(P.debug("Context is taller than container. Specifying exact height for container",P.cache.context.height),r.css({height:e})):r.css({height:""}),Math.abs(r.outerHeight()-P.cache.context.height)>p.jitter&&(P.debug("Context has padding, specifying exact height for container",P.cache.context.height),r.css({height:P.cache.context.height})))},minimumSize:function(){var e=P.cache.element;r.css("min-height",e.height)},scroll:function(e){P.debug("Setting scroll on element",e),P.elementScroll!=e&&(P.is.top()&&y.css("bottom","").css("top",-e),P.is.bottom()&&y.css("top","").css("bottom",e))},size:function(){0!==P.cache.element.height&&0!==P.cache.element.width&&(B.style.setProperty("width",P.cache.element.width+"px","important"),B.style.setProperty("height",P.cache.element.height+"px","important"))}},is:{standardScroll:function(){return z[0]==t},top:function(){return y.hasClass(b.top)},bottom:function(){return y.hasClass(b.bottom)},initialPosition:function(){return!P.is.fixed()&&!P.is.bound()},hidden:function(){return!y.is(":visible")},bound:function(){return y.hasClass(b.bound)},fixed:function(){return y.hasClass(b.fixed)}},stick:function(e){var t=e||z.scrollTop(),o=P.cache,n=o.fits,i=o.sameHeight,s=o.element,r=o.scrollContext,c=o.context,l=P.is.bottom()&&p.pushing?p.bottomOffset:p.offset,a=(e={top:t+l,bottom:t+l+r.height},P.get.direction(e.top),n?0:P.get.elementScroll(e.top)),f=!n;0===s.height||i||(P.is.initialPosition()?e.top>=c.bottom?(P.debug("Initial element position is bottom of container"),P.bindBottom()):e.top>s.top&&(s.height+e.top-a>=c.bottom&&s.height<c.height?(P.debug("Initial element position is bottom of container"),P.bindBottom()):(P.debug("Initial element position is fixed"),P.fixTop())):P.is.fixed()?P.is.top()?e.top<=s.top?(P.debug("Fixed element reached top of container"),P.setInitialPosition()):s.height+e.top-a>=c.bottom?(P.debug("Fixed element reached bottom of container"),P.bindBottom()):f&&(P.set.scroll(a),P.save.lastScroll(e.top),P.save.elementScroll(a)):P.is.bottom()&&(e.bottom-s.height<=s.top?(P.debug("Bottom fixed rail has reached top of container"),P.setInitialPosition()):e.bottom>=c.bottom?(P.debug("Bottom fixed rail has reached bottom of container"),P.bindBottom()):f&&(P.set.scroll(a),P.save.lastScroll(e.top),P.save.elementScroll(a))):P.is.bottom()&&(e.top<=s.top?(P.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),P.setInitialPosition()):p.pushing?P.is.bound()&&e.bottom<=c.bottom&&(P.debug("Fixing bottom attached element to bottom of browser."),P.fixBottom()):P.is.bound()&&e.top<=c.bottom-s.height&&(P.debug("Fixing bottom attached element to top of browser."),P.fixTop())))},bindTop:function(){P.debug("Binding element to top of parent container"),P.remove.offset(),p.setSize&&P.set.size(),y.css({left:"",top:"",marginBottom:""}).removeClass(b.fixed).removeClass(b.bottom).addClass(b.bound).addClass(b.top),p.onTop.call(B),p.onUnstick.call(B)},bindBottom:function(){P.debug("Binding element to bottom of parent container"),P.remove.offset(),p.setSize&&P.set.size(),y.css({left:"",top:""}).removeClass(b.fixed).removeClass(b.top).addClass(b.bound).addClass(b.bottom),p.onBottom.call(B),p.onUnstick.call(B)},setInitialPosition:function(){P.debug("Returning to initial position"),P.unfix(),P.unbind()},fixTop:function(){P.debug("Fixing element to top of page"),p.setSize&&P.set.size(),P.set.minimumSize(),P.set.offset(),y.css({left:P.cache.element.left,bottom:"",marginBottom:""}).removeClass(b.bound).removeClass(b.bottom).addClass(b.fixed).addClass(b.top),p.onStick.call(B)},fixBottom:function(){P.debug("Sticking element to bottom of page"),p.setSize&&P.set.size(),P.set.minimumSize(),P.set.offset(),y.css({left:P.cache.element.left,bottom:"",marginBottom:""}).removeClass(b.bound).removeClass(b.top).addClass(b.fixed).addClass(b.bottom),p.onStick.call(B)},unbind:function(){P.is.bound()&&(P.debug("Removing container bound position on element"),P.remove.offset(),y.removeClass(b.bound).removeClass(b.top).removeClass(b.bottom))},unfix:function(){P.is.fixed()&&(P.debug("Removing fixed position on element"),P.remove.minimumSize(),P.remove.offset(),y.removeClass(b.fixed).removeClass(b.top).removeClass(b.bottom),p.onUnstick.call(B))},reset:function(){P.debug("Resetting elements position"),P.unbind(),P.unfix(),P.resetCSS(),P.remove.offset(),P.remove.lastScroll()},resetCSS:function(){y.css({width:"",height:""}),r.css({height:""})},setting:function(t,o){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(o===n)return p[t];p[t]=o}},internal:function(t,o){if(e.isPlainObject(t))e.extend(!0,P,t);else{if(o===n)return P[t];P[t]=o}},debug:function(){!p.silent&&p.debug&&(p.performance?P.performance.log(arguments):(P.debug=Function.prototype.bind.call(console.info,console,p.name+":"),P.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?P.performance.log(arguments):(P.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),P.verbose.apply(console,arguments)))},error:function(){p.silent||(P.error=Function.prototype.bind.call(console.error,console,p.name+":"),P.error.apply(console,arguments))},performance:{log:function(e){var t,o;p.performance&&(o=(t=(new Date).getTime())-(l||t),l=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:B,"Execution Time":o})),clearTimeout(P.performance.timer),P.performance.timer=setTimeout(P.performance.display,0)},display:function(){var t=p.name+":",o=0;l=!1,clearTimeout(P.performance.timer),e.each(a,(function(e,t){o+=t["Execution Time"]})),t+=" "+o+"ms",c&&(t+=" '"+c+"'"),(console.group!==n||console.table!==n)&&0<a.length&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,(function(e,t){t.Name,t["Execution Time"]})),console.groupEnd()),a=[]}},invoke:function(t,o,i){var r,c,l,a=T;return o=o||u,i=B||i,"string"==typeof t&&a!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,(function(o,i){var s=o!=r?i+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(a[s])&&o!=r)a=a[s];else{if(a[s]!==n)return c=a[s],!1;if(!e.isPlainObject(a[i])||o==r)return a[i]!==n&&(c=a[i]),!1;a=a[i]}}))),e.isFunction(c)?l=c.apply(i,o):c!==n&&(l=c),e.isArray(s)?s.push(l):s!==n?s=[s,l]:l!==n&&(s=l),c}};m?(T===n&&P.initialize(),P.invoke(f)):(T!==n&&T.invoke("destroy"),P.initialize())})),s!==n?s:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document);
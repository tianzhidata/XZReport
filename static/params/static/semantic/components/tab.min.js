!function(e,t,a,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(i){var o,r=e.isFunction(this)?e(t):e(this),s=r.selector||"",c=(new Date).getTime(),l=[],d=i,u="string"==typeof d,b=[].slice.call(arguments,1),g=!1;return r.each((function(){var f,h,p,m,v,y=e.isPlainObject(i)?e.extend(!0,{},e.fn.tab.settings,i):e.extend({},e.fn.tab.settings),T=y.className,L=y.metadata,x=y.selector,A=y.error,P="."+y.namespace,C="module-"+y.namespace,F=e(this),S={},j=!0,E=0,O=this,w=F.data(C),k={initialize:function(){k.debug("Initializing tab menu item",F),k.fix.callbacks(),k.determineTabs(),k.debug("Determining tabs",y.context,h),y.auto&&k.set.auto(),k.bind.events(),y.history&&!g&&(k.initializeHistory(),g=!0),k.instantiate()},instantiate:function(){k.verbose("Storing instance of module",k),w=k,F.data(C,k)},destroy:function(){k.debug("Destroying tabs",F),F.removeData(C).off(P)},bind:{events:function(){e.isWindow(O)||(k.debug("Attaching tab activation events to element",F),F.on("click"+P,k.event.click))}},determineTabs:function(){var t;"parent"===y.context?(0<F.closest(x.ui).length?(t=F.closest(x.ui),k.verbose("Using closest UI element as parent",t)):t=F,f=t.parent(),k.verbose("Determined parent element for creating context",f)):y.context?(f=e(y.context),k.verbose("Using selector for tab context",y.context,f)):f=e("body"),y.childrenOnly?(h=f.children(x.tabs),k.debug("Searching tab context children for tabs",f,h)):(h=f.find(x.tabs),k.debug("Searching tab context for tabs",f,h))},fix:{callbacks:function(){e.isPlainObject(i)&&(i.onTabLoad||i.onTabInit)&&(i.onTabLoad&&(i.onLoad=i.onTabLoad,delete i.onTabLoad,k.error(A.legacyLoad,i.onLoad)),i.onTabInit&&(i.onFirstLoad=i.onTabInit,delete i.onTabInit,k.error(A.legacyInit,i.onFirstLoad)),y=e.extend(!0,{},e.fn.tab.settings,i))}},initializeHistory:function(){if(k.debug("Initializing page state"),e.address===n)return k.error(A.state),!1;if("state"==y.historyType){if(k.debug("Using HTML5 to manage state"),!1===y.path)return k.error(A.path),!1;e.address.history(!0).state(y.path)}e.address.bind("change",k.event.history.change)},event:{click:function(t){var a=e(this).data(L.tab);a!==n?(y.history?(k.verbose("Updating page state",t),e.address.value(a)):(k.verbose("Changing tab",t),k.changeTab(a)),t.preventDefault()):k.debug("No tab specified")},history:{change:function(t){var a=t.pathNames.join("/")||k.get.initialPath(),i=y.templates.determineTitle(a)||!1;k.performance.display(),k.debug("History change event",a,t),v=t,a!==n&&k.changeTab(a),i&&e.address.title(i)}}},refresh:function(){p&&(k.debug("Refreshing tab",p),k.changeTab(p))},cache:{read:function(e){return e!==n&&S[e]},add:function(e,t){e=e||p,k.debug("Adding cached content for",e),S[e]=t},remove:function(e){e=e||p,k.debug("Removing cached content for",e),delete S[e]}},set:{auto:function(){var t="string"==typeof y.path?y.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";k.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(y.apiSettings)?y.apiSettings.url=t:y.apiSettings={url:t}},loading:function(e){var t=k.get.tabElement(e);t.hasClass(T.loading)||(k.verbose("Setting loading state for",t),t.addClass(T.loading).siblings(h).removeClass(T.active+" "+T.loading),0<t.length&&y.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(a){var n=t.history&&t.history.pushState&&y.ignoreFirstLoad&&j,i=y.auto||e.isPlainObject(y.apiSettings),o=i&&!n?k.utilities.pathToArray(a):k.get.defaultPathArray(a);a=k.utilities.arrayToPath(o),e.each(o,(function(t,r){var s,c,l,d,u=o.slice(0,t+1),b=k.utilities.arrayToPath(u),g=k.is.tab(b),h=t+1==o.length,x=k.get.tabElement(b);if(k.verbose("Looking for tab",r),g){if(k.verbose("Tab was found",r),p=b,m=k.utilities.filterArray(o,u),h?d=!0:(c=o.slice(0,t+2),l=k.utilities.arrayToPath(c),(d=!k.is.tab(l))&&k.verbose("Tab parameters found",c)),d&&i)return n?(k.debug("Ignoring remote content on first tab load",b),j=!1,k.cache.add(a,x.html()),k.activate.all(b),y.onFirstLoad.call(x[0],b,m,v),y.onLoad.call(x[0],b,m,v)):(k.activate.navigation(b),k.fetch.content(b,a)),!1;k.debug("Opened local tab",b),k.activate.all(b),k.cache.read(b)||(k.cache.add(b,!0),k.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(x[0],b,m,v)),y.onLoad.call(x[0],b,m,v)}else{if(-1!=a.search("/")||""===a)return k.error(A.missingTab,F,f,b),!1;if(b=(s=e("#"+a+', a[name="'+a+'"]')).closest("[data-tab]").data(L.tab),x=k.get.tabElement(b),s&&0<s.length&&b)return k.debug("Anchor link used, opening parent tab",x,s),x.hasClass(T.active)||setTimeout((function(){k.scrollTo(s)}),0),k.activate.all(b),k.cache.read(b)||(k.cache.add(b,!0),k.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(x[0],b,m,v)),y.onLoad.call(x[0],b,m,v),!1}}))},scrollTo:function(t){var n=!!(t&&0<t.length)&&t.offset().top;!1!==n&&(k.debug("Forcing scroll to an in-page link in a hidden tab",n,t),e(a).scrollTop(n))},update:{content:function(t,a,i){var o=k.get.tabElement(t),r=o[0];i=i!==n?i:y.evaluateScripts,"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&"string"!=typeof a?o.empty().append(e(a).clone(!0)):i?(k.debug("Updating HTML and evaluating inline scripts",t,a),o.html(a)):(k.debug("Updating HTML",t,a),r.innerHTML=a)}},fetch:{content:function(t,a){var i,o,r=k.get.tabElement(t),s={dataType:"html",encodeParameters:!1,on:"now",cache:y.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==y.cacheType&&k.cache.add(a,e),k.update.content(t,e),t==p?(k.debug("Content loaded",t),k.activate.tab(t)):k.debug("Content loaded in background",t),y.onFirstLoad.call(r[0],t,m,v),y.onLoad.call(r[0],t,m,v),y.loadOnce?k.cache.add(a,!0):"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&0<r.children().length?setTimeout((function(){var e=(e=r.children().clone(!0)).not("script");k.cache.add(a,e)}),0):k.cache.add(a,r.html())},urlData:{tab:a}},c=r.api("get request")||!1,l=c&&"pending"===c.state();a=a||t,o=k.cache.read(a),y.cache&&o?(k.activate.tab(t),k.debug("Adding cached content",a),y.loadOnce||("once"==y.evaluateScripts?k.update.content(t,o,!1):k.update.content(t,o)),y.onLoad.call(r[0],t,m,v)):l?(k.set.loading(t),k.debug("Content is already loading",a)):e.api!==n?(i=e.extend(!0,{},y.apiSettings,s),k.debug("Retrieving remote content",a,i),k.set.loading(t),r.api(i)):k.error(A.api)}},activate:{all:function(e){k.activate.tab(e),k.activate.navigation(e)},tab:function(e){var t=k.get.tabElement(e),a="siblings"==y.deactivate?t.siblings(h):h.not(t),n=t.hasClass(T.active);k.verbose("Showing tab content for",t),n||(t.addClass(T.active),a.removeClass(T.active+" "+T.loading),0<t.length&&y.onVisible.call(t[0],e))},navigation:function(e){var t=k.get.navElement(e),a="siblings"==y.deactivate?t.siblings(r):r.not(t),n=t.hasClass(T.active);k.verbose("Activating tab navigation for",t,e),n||(t.addClass(T.active),a.removeClass(T.active+" "+T.loading))}},deactivate:{all:function(){k.deactivate.navigation(),k.deactivate.tabs()},navigation:function(){r.removeClass(T.active)},tabs:function(){h.removeClass(T.active+" "+T.loading)}},is:{tab:function(e){return e!==n&&0<k.get.tabElement(e).length}},get:{initialPath:function(){return r.eq(0).data(L.tab)||h.eq(0).data(L.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return k.utilities.pathToArray(k.get.defaultPath(e))},defaultPath:function(e){var t=r.filter("[data-"+L.tab+'^="'+e+'/"]').eq(0).data(L.tab)||!1;if(t){if(k.debug("Found default tab",t),E<y.maxDepth)return E++,k.get.defaultPath(t);k.error(A.recursion)}else k.debug("No default tabs found for",e,h);return E=0,e},navElement:function(e){return e=e||p,r.filter("[data-"+L.tab+'="'+e+'"]')},tabElement:function(e){var t,a,n,i;return e=e||p,n=k.utilities.pathToArray(e),i=k.utilities.last(n),t=h.filter("[data-"+L.tab+'="'+e+'"]'),a=h.filter("[data-"+L.tab+'="'+i+'"]'),0<t.length?t:a},tab:function(){return p}},utilities:{filterArray:function(t,a){return e.grep(t,(function(t){return-1==e.inArray(t,a)}))},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return e===n&&(e=p),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,a){if(k.debug("Changing setting",t,a),e.isPlainObject(t))e.extend(!0,y,t);else{if(a===n)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],a):y[t]=a}},internal:function(t,a){if(e.isPlainObject(t))e.extend(!0,k,t);else{if(a===n)return k[t];k[t]=a}},debug:function(){!y.silent&&y.debug&&(y.performance?k.performance.log(arguments):(k.debug=Function.prototype.bind.call(console.info,console,y.name+":"),k.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?k.performance.log(arguments):(k.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),k.verbose.apply(console,arguments)))},error:function(){y.silent||(k.error=Function.prototype.bind.call(console.error,console,y.name+":"),k.error.apply(console,arguments))},performance:{log:function(e){var t,a;y.performance&&(a=(t=(new Date).getTime())-(c||t),c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":a})),clearTimeout(k.performance.timer),k.performance.timer=setTimeout(k.performance.display,500)},display:function(){var t=y.name+":",a=0;c=!1,clearTimeout(k.performance.timer),e.each(l,(function(e,t){a+=t["Execution Time"]})),t+=" "+a+"ms",s&&(t+=" '"+s+"'"),(console.group!==n||console.table!==n)&&0<l.length&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){t.Name,t["Execution Time"]})),console.groupEnd()),l=[]}},invoke:function(t,a,i){var r,s,c,l=w;return a=a||b,i=O||i,"string"==typeof t&&l!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,(function(a,i){var o=a!=r?i+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(l[o])&&a!=r)l=l[o];else{if(l[o]!==n)return s=l[o],!1;if(!e.isPlainObject(l[i])||a==r)return l[i]!==n?s=l[i]:k.error(A.method,t),!1;l=l[i]}}))),e.isFunction(s)?c=s.apply(i,a):s!==n&&(c=s),e.isArray(o)?o.push(c):o!==n?o=[o,c]:c!==n&&(o=c),s}};u?(w===n&&k.initialize(),k.invoke(d)):(w!==n&&w.invoke("destroy"),k.initialize())})),o!==n?o:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,a){},onLoad:function(e,t,a){},onVisible:function(e,t,a){},onRequest:function(e,t,a){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document);